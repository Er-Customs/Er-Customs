<!-- {% load static %}x -->
<!DOCTYPE html>
<html lang="en">

<head>

	<title>Signup</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="google-signin-client_id" content="YOUR_CLIENT_ID.apps.googleusercontent.com">
	<!--===============================================================================================-->
	<link rel="icon" type="image/icon" href="/images/favicon.ico">
	<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="/css/bootstrap.min.css">
	<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="/css/font-awesome.min.css">
	<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="/css/animate.css">
	<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="/css/hamburgers.min.css">
	<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="/css/select2.min.css">
	<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="/css/util.css">
	<link rel="stylesheet" type="text/css" href="/css/main.css">


	<!--===============================================================================================-->
</head>

<body>
	<!-- {% for message in messages %}
	<div class="alert alert-{{ message.tags }} mb-0 alert-dismissible fade show" role="alert">
		<strong>Message: </strong> {{ message }}
		<button type="button" class="close" data-dismiss="alert" aria-label="Close">
			<span aria-hidden="true">&times;</span>
		</button>
	</div>
	{% endfor %} -->
	<div class="limiter">
		<div class="container-login100">
			<div class="wrap-login100">
				
				<div class="login100-pic js-tilt" data-tilt>
					<img src="/css/img-01.png" alt="IMG" style="margin-bottom: 30px;">
					
				</div>
				
				<form class="login100-form validate-form" action="/signup">
					<!-- onsubmit="return validate()"> -->
					<!-- {% csrf_token %} -->
					<span class="login100-form-title">
						Sign Up
					</span>

					<div class="wrap-input100 validate-input" data-validate="Valid email is required: ex@abc.xyz">
						<input class="input100" type="text" name="email" placeholder="Email">
						<div class="email error"></div>
						<span class="focus-input100"></span>
						<span class="symbol-input100">
							<i class="fa fa-envelope" aria-hidden="true"></i>
						</span>
					</div>

					<div class="wrap-input100 validate-input" data-validate="Password is required">
						<input id="password" class="input100" type="password" name="password" placeholder="Password"
							oninput="validate()">
						<div class="password error"></div>
						<span class="focus-input100"></span>
						<span class="symbol-input100">
							<i class="fa fa-lock" aria-hidden="true"></i>
						</span>
					</div>
					<div class="wrap-input100 validate-input" data-validate="Password is required">
						<input id="comfirmPassword" class="input100" type="password" name="comfirmPassword"
							placeholder="Confirm Password" oninput="validate()">
						<span class="focus-input100"></span>
						<span class="symbol-input100">
							<i class="fa fa-lock" aria-hidden="true"></i>
						</span>
					</div>
					<div class="container-login100-form-btn">
						<button class="login100-form-btn" value="submit">
							Sign Up
						</button>
					</div>

					<div class="text-center p-t-60">
						<span class="txt1">
							Forgot
						</span>
						<a class="txt2" href="#">
							Password?
						</a>
					</div>
					<div class="logo">
						<img src="https://img.icons8.com/color/48/000000/google-logo.png" class="google">
						<img src="https://img.icons8.com/color/48/000000/facebook-new.png" class="facbook">
					</div>
					<!-- <div class="text-center p-t-136">
						<a class="txt2" href="/app/signup">
							Create your Account
							<i class="fa fa-long-arrow-right m-l-5" aria-hidden="true"></i>
						</a>
					</div> -->
				</form>
				<div class="errors">
					<ul>
						<p>Follow instruction in correct order to create password</p>
						<li id="upper" style="font-size: 12px;">1)Atleast one uppercase</li>
						<li id="lower" style="font-size: 12px;">2)Atleast one lowercase</li>
						<li id="special_char" style="font-size: 12px;">3)Atleast one special character outof(@ # $ %
							& ₹)</li>
						<li id="number" style="font-size: 12px;">4)Atleast one number</li>
						<li id="length" style="font-size: 12px;">5)Atleast 10 character</li>
					</ul>
				</div>
			</div>
		</div>
	</div>




	<!--===============================================================================================-->
	<script src="/css/jquery-3.2.1.min.js"></script>
	<!--===============================================================================================-->
	<script src="/css/popper.js"></script>
	<script src="/css/bootstrap.min.js"></script>
	<!--===============================================================================================-->
	<script src="/css/select2.min.js"></script>
	<!--===============================================================================================-->
	<script src="/css/tilt.jquery.min.js"></script>
	<script>
		$('.js-tilt').tilt({
			scale: 1.1
		})
	</script>
	<!--===============================================================================================-->
	<script src="/css/main.js"></script>

</body>
<script>
	var flag = true;
	function validate() {
		var pass = document.getElementById('password');
		var upper = document.getElementById('upper');
		var lower = document.getElementById('lower');
		var special_char = document.getElementById('special_char');
		var number = document.getElementById('number');
		var length = document.getElementById('length');
		var pass1 = document.getElementById('comfirmPassword');
		if (pass.value.match(/[A-Z]/)) {
			upper.style.color = 'green';
			if (pass.value.match(/[a-z]/)) {
				lower.style.color = 'green';
				if (pass.value.match(/[\@\#\$\%\&\₹]/)) {
					special_char.style.color = 'green';
					if (pass.value.match(/[0-9]/)) {
						number.style.color = 'green';
						if (pass.value.length > 10) {
							length.style.color = 'green';
							flag = true;
							if (pass.value != pass1.value) {
								// alert('Passwords are not same try again.');
								flag = false;
							}
							else if (pass.value == pass1.value) {
								flag = true;
							}
						}
						else {
							flag = false;
							length.style.color = 'red';
						}
					}
					else {
						flag = false;
						special_char.style.color = 'red';
					}
				}
				else {
					flag = false;
					upper.style.color = 'red';
				}
			}
			else {
				flag = false;
				lower.style.color = 'red';
			}
		}
		else {
			flag = false;
			upper.style.color = 'red';
		}

	}
	// function confirm() {
	// 	var pass = document.getElementById('password');
	// 	var pass1 = document.getElementById('comfirmPassword');
	// 	if (pass.value != pass1.value) {
	// 		// alert('Passwords are not same try again.');
	// 		flag = false;
	// 	}
	// 	else if (pass.value == pass1.value) {
	// 		flag = true;
	// 	}
	// }

	const form = document.querySelector('form');
	const emailError = document.querySelector('.email.error');
	const passwordError = document.querySelector('.password.error');

	form.addEventListener('submit', async (e) => {
		e.preventDefault();

		// reset errors
		emailError.textContent = '';
		passwordError.textContent = '';

		// get values
		const email = form.email.value;
		const password = form.password.value;

		try {
			if (flag) {
				const res = await fetch('/signup', {
					method: 'POST',
					body: JSON.stringify({ email, password }),
					headers: { 'Content-Type': 'application/json' }
				});
				const data = await res.json();
				console.log(data);
				// alert(data);	
				if (data.errors) {
					emailError.textContent = data.errors.email;
					passwordError.textContent = data.errors.password;
				}

				if (data.user) {
					location.assign('/');
				}
			}
			else {
				alert('Enter Proper Password or Passwords are not same');
			}
		}
		catch (err) {
			alert(err);
		}

	});
</script>

</html>